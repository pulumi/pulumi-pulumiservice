name: yaml-ttl-schedule
runtime: yaml
description: Example of TtlSchedule resource

config:
  organizationName:
    type: string
    default: service-provider-test-org
  digits:
    type: string

resources:
  # DeploymentSettings required before schedule
  settings:
    type: pulumiservice:DeploymentSettings
    properties:
      organization: ${organizationName}
      project: yaml-ttl-schedule
      stack: test-stack-${digits}
      sourceContext:
        git:
          repoUrl: https://github.com/pulumi/examples.git
          branch: refs/heads/master

  # TTL schedule
  ttlSchedule:
    type: pulumiservice:TtlSchedule
    properties:
      organization: ${organizationName}
      project: yaml-ttl-schedule
      stack: test-stack-${digits}
      timestamp: "2026-12-31T23:59:59Z"
      deleteAfterDestroy: false
    options:
      dependsOn:
        - ${settings}

outputs:
  scheduleId: ${ttlSchedule.scheduleId}
